<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Login to <%= name %> - Secure panel access">
    <title>Login | <%= name %></title>
    
    <!-- Preload resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet" />
    
    <!-- Tailwind CSS with custom colors -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: {
                50: '#f0f9ff',
                100: '#e0f2fe',
                200: '#bae6fd',
                300: '#7dd3fc',
                400: '#38bdf8',
                500: '#0ea5e9',
                600: '#0284c7',
                700: '#0369a1',
                800: '#075985',
                900: '#0c4a6e',
              },
              secondary: {
                50: '#f0fdf4',
                100: '#dcfce7',
                200: '#bbf7d0',
                300: '#86efac',
                400: '#4ade80',
                500: '#22c55e',
                600: '#16a34a',
                700: '#15803d',
                800: '#166534',
                900: '#14532d',
              }
            },
            animation: {
              'float': 'float 6s ease-in-out infinite',
              'float-reverse': 'float-reverse 7s ease-in-out infinite',
              'pulse-slow': 'pulse 5s cubic-bezier(0.4, 0, 0.6, 1) infinite',
              'fade-in': 'fadeIn 0.5s ease-out forwards',
              'slide-up': 'slideUp 0.6s ease-out forwards',
              'space-rotate': 'spaceRotate 120s linear infinite',
              'nebula-pulse': 'nebulaPulse 20s ease-in-out infinite alternate',
              'comet-trail': 'cometTrail 10s linear infinite'
            },
            keyframes: {
              float: {
                '0%, 100%': { transform: 'translateY(0) rotate(0deg)' },
                '50%': { transform: 'translateY(-20px) rotate(5deg)' }
              },
              'float-reverse': {
                '0%, 100%': { transform: 'translateY(0) rotate(0deg)' },
                '50%': { transform: 'translateY(-15px) rotate(-3deg)' }
              },
              fadeIn: {
                '0%': { opacity: '0' },
                '100%': { opacity: '1' }
              },
              slideUp: {
                '0%': { opacity: '0', transform: 'translateY(20px)' },
                '100%': { opacity: '1', transform: 'translateY(0)' }
              },
              spaceRotate: {
                '0%': { 'background-position': '0% 0%' },
                '100%': { 'background-position': '100% 100%' }
              },
              nebulaPulse: {
                '0%': { transform: 'scale(1)', opacity: '0.6' },
                '100%': { transform: 'scale(1.2)', opacity: '0.8' }
              },
              cometTrail: {
                '0%': { transform: 'translateX(-100vw) translateY(-100vh)' },
                '100%': { transform: 'translateX(100vw) translateY(100vh)' }
              }
            }
          }
        }
      }
    </script>
    
    <!-- Animate.css for additional animations -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
      
      :root {
        --primary-color: #0ea5e9;
        --secondary-color: #22c55e;
        --accent-color: #f59e0b;
        --space-dark: #0f0f1a;
        --space-darker: #070710;
        --nebula-purple: #6a0dad;
        --nebula-blue: #1e90ff;
        --nebula-pink: #ff1493;
      }
      
      body {
        font-family: 'Inter', system-ui, -apple-system, sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        background: 
          radial-gradient(ellipse at bottom, var(--space-darker) 0%, var(--space-dark) 100%),
          url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><circle cx="50" cy="50" r="1" fill="white" opacity="0.5"/></svg>');
        background-size: cover, 2px 2px;
        animation: spaceRotate 120s linear infinite;
        overflow-x: hidden;
        height: 100vh;
        margin: 0;
        will-change: transform;
      }
      
      /* Nebula elements - reduced blur for performance */
      .nebula {
        position: fixed;
        border-radius: 50%;
        filter: blur(40px);
        z-index: 0;
        mix-blend-mode: screen;
        animation: nebulaPulse 20s ease-in-out infinite alternate;
        will-change: transform, opacity;
      }
      
      .nebula-1 {
        width: 300px;
        height: 300px;
        background: radial-gradient(circle, var(--nebula-purple) 0%, transparent 70%);
        top: 20%;
        left: 10%;
        animation-delay: -5s;
      }
      
      .nebula-2 {
        width: 400px;
        height: 400px;
        background: radial-gradient(circle, var(--nebula-blue) 0%, transparent 70%);
        bottom: 10%;
        right: 10%;
        animation-delay: -10s;
      }
      
      .nebula-3 {
        width: 250px;
        height: 250px;
        background: radial-gradient(circle, var(--nebula-pink) 0%, transparent 70%);
        top: 60%;
        left: 30%;
        animation-delay: -15s;
      }
      
      /* Comet animation - simplified for performance */
      .comet {
        position: fixed;
        width: 4px;
        height: 4px;
        background: white;
        border-radius: 50%;
        filter: blur(1px);
        z-index: 1;
        animation: cometTrail 10s linear infinite;
        will-change: transform;
      }
      
      .comet::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100px;
        height: 2px;
        background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.8) 100%);
        transform-origin: left center;
        transform: rotate(-45deg);
      }
      
      /* Planet animation */
      .planet {
        position: fixed;
        border-radius: 50%;
        z-index: 0;
        box-shadow: inset 0 0 30px rgba(0,0,0,0.5);
        will-change: transform;
      }
      
      .planet-1 {
        width: 150px;
        height: 150px;
        background: radial-gradient(circle at 30% 30%, #4e4e7e, #2c2c54);
        top: 15%;
        right: 10%;
        box-shadow: 
          0 0 40px rgba(78, 78, 126, 0.3),
          inset -15px -15px 40px rgba(0,0,0,0.5);
      }
      
      .planet-1::before {
        content: '';
        position: absolute;
        width: 100%;
        height: 100%;
        border-radius: 50%;
        background: 
          radial-gradient(circle at 20% 40%, transparent 40%, rgba(255,255,255,0.1) 41%),
          radial-gradient(circle at 60% 70%, transparent 30%, rgba(255,255,255,0.1) 31%),
          radial-gradient(circle at 80% 30%, transparent 20%, rgba(255,255,255,0.1) 21%);
      }
      
      /* Stars - optimized for performance */
      .star {
        position: fixed;
        background-color: white;
        border-radius: 50%;
        z-index: 0;
        will-change: transform, opacity;
      }
      
      .shooting-star {
        position: fixed;
        width: 3px;
        height: 3px;
        background: white;
        border-radius: 50%;
        filter: blur(1px);
        z-index: 1;
        will-change: transform;
      }
      
      .shooting-star::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 80px;
        height: 1px;
        background: linear-gradient(90deg, rgba(255,255,255,1) 0%, rgba(255,255,255,0) 100%);
      }
      
      @keyframes twinkle {
        0%, 100% { opacity: 0.2; transform: scale(1); }
        50% { opacity: 1; transform: scale(1.1); }
      }
      
      @keyframes shootingStar {
        0% { transform: translateX(0) translateY(0); opacity: 0; }
        10% { opacity: 1; }
        100% { transform: translateX(1000px) translateY(500px); opacity: 0; }
      }
      
      /* Card styles */
      .card {
        backdrop-filter: blur(10px);
        background: rgba(15, 15, 26, 0.7);
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
        border: 1px solid rgba(255, 255, 255, 0.1);
        transition: all 0.3s ease;
        z-index: 10;
        position: relative;
        color: white;
      }
      
      .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 40px 0 rgba(31, 38, 135, 0.25);
        background: rgba(15, 15, 26, 0.8);
      }
      
      .btn-primary {
        transition: all 0.2s ease;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
      }
      
      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
      }
      
      .btn-primary:active {
        transform: translateY(0);
      }
      
      .btn-secondary {
        transition: all 0.2s ease;
      }
      
      .btn-secondary:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      }
      
      .animate-delay-1 {
        animation-delay: 0.1s;
      }
      
      .animate-delay-2 {
        animation-delay: 0.2s;
      }
      
      .animate-delay-3 {
        animation-delay: 0.3s;
      }
      
      .animate-delay-4 {
        animation-delay: 0.4s;
      }
      
      /* Floating astronaut - optimized */
      .astronaut {
        position: fixed;
        width: 80px;
        height: 80px;
        background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M12 2.5c-1.5 0-3 1-3 2.5s1.5 2.5 3 2.5 3-1 3-2.5-1.5-2.5-3-2.5zm0 6c-1.5 0-3 1-3 2.5s1.5 2.5 3 2.5 3-1 3-2.5-1.5-2.5-3-2.5zm0 6c-1.5 0-3 1-3 2.5s1.5 2.5 3 2.5 3-1 3-2.5-1.5-2.5-3-2.5z"/></svg>');
        background-size: contain;
        z-index: 5;
        animation: float 15s ease-in-out infinite;
        filter: drop-shadow(0 0 8px rgba(255,255,255,0.7));
        will-change: transform;
      }
      
      /* Ripple effect */
      .ripple {
        position: absolute;
        border-radius: 50%;
        background-color: rgba(255, 255, 255, 0.3);
        transform: scale(0);
        animation: ripple 0.6s linear;
        pointer-events: none;
      }
      
      @keyframes ripple {
        to {
          transform: scale(4);
          opacity: 0;
        }
      }
    </style>
  </head>
  <body class="min-h-screen flex items-center justify-center p-4">
    <!-- Space background elements -->
    <div class="nebula nebula-1"></div>
    <div class="nebula nebula-2"></div>
    <div class="nebula nebula-3"></div>
    
    <!-- Planet -->
    <div class="planet planet-1"></div>
    
    <!-- Stars -->
    <div id="stars-container"></div>
    
    <!-- Shooting stars - reduced quantity -->
    <div id="shooting-stars-container"></div>
    
    <!-- Comet - reduced to one for performance -->
    <div class="comet" style="top: 20%; left: 10%; animation-delay: 0s;"></div>
    
    <!-- Floating astronaut -->
    <div class="astronaut" style="top: 30%; left: 80%;"></div>
    
    <!-- Floating particles - removed particles.js for better performance -->
    
    <div class="w-full max-w-md relative z-20">
      <!-- Logo/Branding with animation -->
      <div class="text-center mb-8 animate__animated animate__fadeInDown">
        <div class="inline-flex items-center justify-center w-16 h-16 bg-white rounded-full shadow-lg mb-4 animate__animated animate__pulse animate__infinite animate__slower">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8 text-primary-600 animate-float">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 002.25-2.25V6.75a2.25 2.25 0 00-2.25-2.25H6.75A2.25 2.25 0 004.5 6.75v10.5a2.25 2.25 0 002.25 2.25zm.75-12h9v9h-9v-9z" />
          </svg>
        </div>
        <h1 class="text-3xl font-bold text-white bg-clip-text text-transparent bg-gradient-to-r from-primary-400 to-secondary-400 animate__animated animate__fadeIn animate-delay-1">
          <%= name %>
        </h1>
      </div>
      
      <!-- Error Messages with animation -->
      <% if (req.query.err == "INTERNALERROR") { %>
      <div class="bg-red-900/50 border-l-4 border-red-500 rounded-lg text-red-100 px-4 py-3 mb-6 shadow-sm animate__animated animate__fadeIn animate-delay-1" role="alert">
        <div class="flex items-start">
          <div class="flex-shrink-0 pt-0.5 animate-pulse">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
            </svg>
          </div>
          <div class="ml-3">
            <h3 class="text-sm font-medium">Internal Server Error</h3>
            <div class="mt-1 text-sm text-red-200">
              <p>Molactyl couldn't process the action due to an internal issue. Please try again later.</p>
            </div>
          </div>
        </div>
      </div>
      <% } %> 
      
      <% if (req.query.err == "BANNED") { %>
      <div class="bg-red-900/50 border-l-4 border-red-500 rounded-lg text-red-100 px-4 py-3 mb-6 shadow-sm animate__animated animate__fadeIn animate-delay-1" role="alert">
        <div class="flex items-start">
          <div class="flex-shrink-0 pt-0.5 animate-pulse">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
            </svg>
          </div>
          <div class="ml-3">
            <h3 class="text-sm font-medium">Account Banned</h3>
            <div class="mt-1 text-sm text-red-200">
              <p>Your account has been suspended. Reason: <span class="font-medium"><%= req.query.reason %></span></p>
            </div>
          </div>
        </div>
      </div>
      <% } %>
      
      <!-- Login Card with animation -->
      <div class="card rounded-xl overflow-hidden animate__animated animate__fadeInUp animate-delay-2">
        <div class="p-6 sm:p-8">
          <div class="text-center">
            <h2 class="text-xl sm:text-2xl font-bold text-white mb-2 animate__animated animate__fadeIn animate-delay-3">Welcome back</h2>
            <p class="text-gray-300 mb-6 animate__animated animate__fadeIn animate-delay-4">Sign in to access your dashboard</p>
          </div>
          
          <div class="space-y-4">
            <!-- Discord Login Button with animation -->
            <a href="../login/discord" class="w-full flex items-center justify-center px-4 py-2 sm:py-3 border border-transparent rounded-lg text-white bg-[#5865F2] hover:bg-[#4752C4] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#5865F2] btn-primary animate__animated animate__fadeInUp animate-delay-3">
              <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M20.317 4.37a19.791 19.791 0 00-4.885-1.515.074.074 0 00-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 00-5.487 0 12.64 12.64 0 00-.617-1.25.077.077 0 00-.079-.037A19.736 19.736 0 003.677 4.37a.07.07 0 00-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 00.031.057 19.9 19.9 0 005.993 3.03.078.078 0 00.084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 00-.041-.106 13.107 13.107 0 01-1.872-.892.077.077 0 01-.008-.128 10.2 10.2 0 00.372-.292.074.074 0 01.077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 01.078.01c.12.098.246.198.373.292a.077.077 0 01-.006.127 12.299 12.299 0 01-1.873.892.077.077 0 00-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 00.084.028 19.839 19.839 0 006.002-3.03.077.077 0 00.032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 00-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/>
              </svg>
              Continue with Discord
            </a>
            
            <!-- Divider with animation -->
            <div class="relative animate__animated animate__fadeIn animate-delay-4">
              <div class="absolute inset-0 flex items-center">
                <div class="w-full border-t border-gray-600"></div>
              </div>
              <div class="relative flex justify-center text-sm">
                <span class="px-2 bg-gray-900/70 text-gray-300">or</span>
              </div>
            </div>
            
            <!-- Panel Button with animation -->
            <a href="../panel" class="w-full flex items-center justify-center px-4 py-2 sm:py-3 border border-gray-600 rounded-lg text-gray-200 bg-gray-800/50 hover:bg-gray-700/50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 btn-secondary animate__animated animate__fadeInUp animate-delay-4">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
              </svg>
              Go to Panel
            </a>
          </div>
        </div>
        
        <!-- Card footer with animation -->
        <div class="bg-gray-900/30 px-4 sm:px-6 py-3 border-t border-gray-700 animate__animated animate__fadeIn animate-delay-5">
          <div class="text-center text-xs sm:text-sm text-gray-400">
            <p>By continuing, you agree to our <a href="#" class="font-medium text-primary-400 hover:text-primary-300">Terms</a> and <a href="#" class="font-medium text-primary-400 hover:text-primary-300">Privacy Policy</a>.</p>
          </div>
        </div>
      </div>
      
      <!-- Footer with animation -->
      <div class="mt-4 sm:mt-6 text-center text-xs sm:text-sm text-gray-400 animate__animated animate__fadeIn animate-delay-6">
        <p>Need help? <a href="#" class="font-medium text-primary-400 hover:text-primary-300">Contact support</a></p>
        <p class="mt-1">&copy; <%= new Date().getFullYear() %> <%= name %>. All rights reserved.</p>
      </div>
    </div>
    
    <script>
      // Optimized space background initialization
      document.addEventListener('DOMContentLoaded', function() {
        // Create stars - reduced quantity for performance
        const starsContainer = document.getElementById('stars-container');
        for (let i = 0; i < 100; i++) {
          const star = document.createElement('div');
          star.classList.add('star');
          
          const size = Math.random() * 2 + 1;
          star.style.width = `${size}px`;
          star.style.height = `${size}px`;
          star.style.left = `${Math.random() * 100}%`;
          star.style.top = `${Math.random() * 100}%`;
          star.style.animation = `twinkle ${Math.random() * 5 + 3}s infinite alternate`;
          star.style.animationDelay = `${Math.random() * 5}s`;
          
          starsContainer.appendChild(star);
        }
        
        // Create shooting stars - reduced quantity
        const shootingStarsContainer = document.getElementById('shooting-stars-container');
        for (let i = 0; i < 3; i++) {
          const shootingStar = document.createElement('div');
          shootingStar.classList.add('shooting-star');
          
          shootingStar.style.left = `${Math.random() * 20}%`;
          shootingStar.style.top = `${Math.random() * 20}%`;
          shootingStar.style.animation = `shootingStar ${Math.random() * 10 + 5}s linear infinite`;
          shootingStar.style.animationDelay = `${Math.random() * 20}s`;
          
          shootingStarsContainer.appendChild(shootingStar);
        }
        
        // Optimized astronaut animation
        function animateAstronaut() {
          const astronaut = document.querySelector('.astronaut');
          if (!astronaut) return;
          
          const x = Math.random() * 70 + 15;
          const y = Math.random() * 70 + 15;
          
          astronaut.style.transition = 'all 20s cubic-bezier(0.4, 0, 0.2, 1)';
          astronaut.style.left = `${x}%`;
          astronaut.style.top = `${y}%`;
          
          setTimeout(animateAstronaut, 20000);
        }
        
        // Start astronaut animation after a delay
        setTimeout(animateAstronaut, 1000);
        
        // Optimized ripple effect for buttons
        document.querySelectorAll('a').forEach(link => {
          link.addEventListener('click', function(e) {
            // Check if the link is not an external link
            if (!this.href || this.href.startsWith('http') || this.href.startsWith('#')) return;
            
            const rect = this.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            
            const ripple = document.createElement('span');
            ripple.classList.add('ripple');
            ripple.style.width = ripple.style.height = `${size}px`;
            ripple.style.left = `${e.clientX - rect.left - size/2}px`;
            ripple.style.top = `${e.clientY - rect.top - size/2}px`;
            
            this.appendChild(ripple);
            
            // Clean up after animation
            setTimeout(() => {
              ripple.remove();
            }, 600);
          });
        });
      });
    </script>
  </body>
</html>
